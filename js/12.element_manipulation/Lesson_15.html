<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lesson_15(292, 293, 294)</title>
</head>
<style>
    .description {
        width: 600px;
    }

    .view {
        width: 300px;
    }

    div {
        width: 200px;
    }

    table, th, td {
        padding: 10px;
        border: 1px solid;
        border-collapse: collapse;
    }

    .color {
        background: red;
    }

    .color_red {
        background: red;
    }

    .color_green {
        background: green;
    }

</style>
<body>
<h1>Поиск ячеек таблицы с помощью атрибута data</h1>
<table border="1">
    <tr>
        <td class="description">
            <p>Дана следующая HTML таблица. Сделайте так, чтобы по клику на любую ячейку в красный фон красились все
                ячейки этой колонки.</p>
        </td>
        <td colspan="2" class="view">
            <div id="parent_1">
                <table id="table_1">
                    <tr>
                        <td data-col="1"></td>
                        <td data-col="2"></td>
                        <td data-col="3"></td>
                    </tr>
                    <tr>
                        <td data-col="1"></td>
                        <td data-col="2"></td>
                        <td data-col="3"></td>
                    </tr>
                    <tr>
                        <td data-col="1"></td>
                        <td data-col="2"></td>
                        <td data-col="3"></td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Даны также две переменные, в которых хранятся номер колонки и номер ряда.
                Сделайте кнопку, по нажатию на которую в красный фон покрасится та ячейка,
                номер которой совпадает с номером из переменных.</p>
        </td>
        <td colspan="2" class="view">
            <div id="parent_2">
                <table id="table_2">
                    <tr>
                        <td data-row="1" data-col="1"></td>
                        <td data-row="1" data-col="2"></td>
                        <td data-row="1" data-col="3"></td>
                    </tr>
                    <tr>
                        <td data-row="2" data-col="1"></td>
                        <td data-row="2" data-col="2"></td>
                        <td data-row="2" data-col="3"></td>
                    </tr>
                    <tr>
                        <td data-row="3" data-col="1"></td>
                        <td data-row="3" data-col="2"></td>
                        <td data-row="3" data-col="3"></td>
                    </tr>
                </table>
                <button id="but_2">click</button>
            </div>
        </td>
    </tr>
</table>
<h1>Добавление номера колонки и ряда в таблицу</h1>
<table border="1">
    <tr>
        <td class="description">
            <p>Напишите скрипт, который добавит в каждую ячейку таблицы атрибут data-col с номером колонки таблицы, в
                которой находится эта ячейка</p>
        </td>
        <td colspan="2" class="view">
            <div id="parent_3">
                <table id="table_3">
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Модифицируйте предыдущую задачу так, чтобы в ячейку добавлялся еще и номер ее ряда</p>
        </td>
        <td colspan="2" class="view">
            <div id="parent_4">
                <table id="table_4">
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Дана некоторая таблица. Сделайте так, чтобы по клику на любую ячейку в ее текст выводился номер ряда и
                номер колонки этой ячейки.</p>
        </td>
        <td colspan="2" class="view">
            <div id="parent_5">
                <table id="table_5">
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Пусть у нас есть некоторая квадратная HTML таблица. В такой таблице есть две диагонали. Назовем главной
                диагональ, идущую от верхнего левого угла к нижнему правому. Сделайте так, чтобы по клику на любую
                ячейку главной диагонали эта ячейка красилась в красный цвет фона, а по клику любую другую ячейку - она
                красилась в зеленый.</p>
        </td>
        <td colspan="2" class="view">
            <div id="parent_6">
                <table id="table_6">
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
</table>
<h1>Поиск ячеек таблицы через селектор CSS на JavaScript</h1>
<table border="1">
    <tr>
        <td class="description">
            <p>Найдите все ячейки третьего столбца и покрасьте их в красный фон.</p>
        </td>
        <td colspan="2" class="view">
            <div id="parent_7">
                <table id="table_7">
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Найдите третью ячейку первого ряда и покрасьте ее в красный фон.</p>
        </td>
        <td colspan="2" class="view">
            <div id="parent_8">
                <table id="table_8">
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Найдите все четные ряды и покрасьте в них все нечетные ячейки.</p>
        </td>
        <td colspan="2" class="view">
            <div id="parent_9">
                <table id="table_9">
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </td>
    </tr>
</table>
<script>
    "use strict";
    for (let td of document.querySelectorAll('#table_1 td')) {
        td.addEventListener('click', () => {
            let date = td.dataset.col;
            document.querySelectorAll('#table_1 td[data-col="' + date + '"]').forEach(el => el.classList.toggle('color'));
        });
    }

    let col = 2;
    let row = 3;
    let but_2 = document.querySelector('#but_2');
    but_2.addEventListener('click', () => {
        let td = document.querySelector('#table_2 td[data-row="' + row + '"]' + '[data-col="' + col + '"]');
        td.classList.toggle('color');
    });

    function fill_col(table) {
        for (let tr of table.querySelectorAll('tr')) {
            let tds = tr.querySelectorAll('td');
            for (let x = 1; x <= tds.length; x++) {
                tds[x - 1].dataset.col = x;
            }
        }
    }

    function fill_row(table) {
        let trs = table.querySelectorAll('tr');
        for (let row = 1; row <= trs.length; row++) {
            let tds = trs[row - 1].querySelectorAll('td');
            for (let x = 1; x <= tds.length; x++) {
                tds[x - 1].dataset.row = row;
            }
        }
    }

    function fill_actions(table) {
        for (let td of table.querySelectorAll('td')) {
            td.addEventListener('click', function info() {
                let col = this.dataset.col;
                let row = this.dataset.row;
                this.innerHTML = 'row = ' + row + ' col = ' + col;
                this.removeEventListener('click', info);
            });
        }
    }

    function fill_special_actions(table) {
        for (let td of table.querySelectorAll('td')) {
            td.addEventListener('click', function info() {
                let col = this.dataset.col;
                let row = this.dataset.row;
                if (col == row) {
                    this.classList.toggle('color_green');
                } else {
                    this.classList.toggle('color_red');
                }
            });
        }
    }

    let table = document.querySelector('#table_3')

    fill_col(table);

    table = document.querySelector('#table_4');
    fill_col(table);
    fill_row(table);

    table = document.querySelector('#table_5');

    fill_col(table);
    fill_row(table);
    fill_actions(table);

    table = document.querySelector('#table_6');
    fill_col(table);
    fill_row(table);
    fill_special_actions(table);

    for (let td of document.querySelectorAll('#table_7 tr:nth-child(3)')) {
        td.classList.add('color_red');
    }

    document.querySelector('#table_8 tr:nth-child(3) td:nth-child(1)').classList.add('color_red');

    for (let td of document.querySelectorAll('#table_9 tr:nth-child(even) td:nth-child(odd)')) {
        td.classList.add('color_red');
    }
</script>
</body>
</html>