<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lesson_10(281, 282, 283, 284, 285)</title>
</head>
<style>
    .description {
        width: 600px;
    }

    div {
        width: 200px;
        height: 200px;
    }

    table, th, td {
        padding: 10px;
        border: 1px solid;
        border-collapse: collapse;
    }

    .text_line-through {
        text-decoration: line-through;
    }

    .green {
        background-color: #009600;
    }

</style>
<body>
<h1>Редактирование отдельного элемента на JavaScript</h1>
<table border="1">
    <tr>
        <td class="description">
            <p>Модифицируйте приведенный выше код так, чтобы текст абзаца менялся не по потери фокуса,
                а по мере ввода текста в инпут.</p>
        </td>
        <td colspan="2">
            <div id="parent_1">
                <p id="elem_1">text</p>
                <input id="input_1">
            </div>
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Инпута изначально не было на странице, а он появлялся по клику на абзац.</p>
        </td>
        <td colspan="2">
            <div id="parent_2">
                <p id="elem_2">text</p>
            </div>
        </td>
    </tr>
</table>
<h1>Прячем текст при редактировании элемента на JavaScript</h1>
<table border="1">
    <tr>
        <td class="description">
            <p>Сделайте так, чтобы при редактировании инпут появлялся в самом абзаце - вместо текста
                этого абзаца. Пусть затем при окончании редактирования инпут будет убираться, а вместо
                него опять появляться текст абзаца.</p>
        </td>
        <td colspan="2">
            <div id="parent_3">
                <p id="elem_3">text</p>
            </div>
        </td>
    </tr>
</table>
<h1>Редактирование в группе элементов на JavaScript</h1>
<table border="1">
    <tr>
        <td class="description">
            <p>Дан тег ul. Сделайте так, чтобы по клику на любую li в ней появлялся инпут, с помощью
                которого можно будет поредатировать текст этой li.</p>
        </td>
        <td colspan="2">
            <ul id="parent_4">
                <li>1</li>
                <li>2</li>
                <li>3</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Дана HTML таблица. Сделайте так, чтобы по клику на любую ячейку в ней появлялся инпут
                для редактирования текста этой ячейки.</p>
        </td>
        <td colspan="2">
            <table id="table_5">
                <tr>
                    <td>1</td>
                    <td>2</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>4</td>
                </tr>
            </table>
        </td>
    </tr>
</table>
<h1>Одновременное редактирование и удаление элементов</h1>
<table border="1">
    <tr>
        <td class="description">
            <p>Добавьте ссылку на удаление в конец каждого абзаца.
                Сделайте так, чтобы по клику на span в нем появлялся инпут для редактирования.</p>
        </td>
        <td colspan="2">
            <div id="parent_6">
                <p><span>text1</span></p>
                <p><span>text2</span></p>
                <p><span>text3</span></p>
            </div>
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Оберните сначала текст абзаца в теги span, добавьте к этим тегам возможность
                редактирования, а затем добавьте в конец каждого абзаца ссылку на удаление.</p>
        </td>
        <td colspan="2">
            <div id="parent_7">
                <p>text1</p>
                <p>text2</p>
                <p>text3</p>
            </div>
        </td>
    </tr>
</table>
<h1>Стилизация элементов на JavaScript</h1>
<table border="1">
    <tr>
        <td class="description">
            <p>Добавьте в конец каждого абзаца ссылку, по клику на которую текст абзаца будет
                перечеркиваться (а ссылка - нет).</p>
        </td>
        <td colspan="2">
            <div id="parent_8">
                <p>text1</p>
                <p>text2</p>
                <p>text3</p>
            </div>
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Модифицируйте предыдущую задачу так, чтобы после нажатия на ссылку эта ссылка
                удалялась из абзаца (а текст абзаца становился перечеркнутым).</p>
        </td>
        <td colspan="2">
            <div id="parent_9">
                <p>text1</p>
                <p>text2</p>
                <p>text3</p>
            </div>
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Дана некоторая HTML таблица. Добавьте в эту таблицу еще одну колонку со ссылкой.
                По нажатию на эту ссылку ряд с этой ссылкой должен стать зеленого фона.</p>
        </td>
        <td colspan="2">
            <table id="table_10">
                <tr>
                    <td>1</td>
                </tr>
                <tr>
                    <td>2</td>
                </tr>
                <tr>
                    <td>3</td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Модифицируйте предыдущую задачу так, чтобы первое нажатие по ссылке красило ряд в
                зеленый фон, а второе нажатие отменяло это действие.</p>
        </td>
        <td colspan="2">
            <table id="table_11">
                <tr>
                    <td>1</td>
                </tr>
                <tr>
                    <td>2</td>
                </tr>
                <tr>
                    <td>3</td>
                </tr>
            </table>
        </td>
    </tr>
</table>
<script>
    "use strict";
    let elem = document.querySelector('#elem_1');
    let input = document.querySelector('#input_1');

    input.value = elem.innerHTML; // записываем в инпут текст абзаца

    input.addEventListener('input', function () {
        elem.innerHTML = this.value;
    });

    let elem_2 = document.querySelector('#elem_2');
    elem_2.addEventListener('click', () => {
        let input = document.createElement('input');
        input.value = elem_2.innerHTML;

        input.addEventListener('blur', () => {
            elem_2.innerHTML = input.value;
            input.remove();
        });
        elem_2.parentElement.appendChild(input);
    })

    let elem_3 = document.querySelector('#elem_3');
    elem_3.addEventListener('click', function func() {
        let input = document.createElement('input');
        input.value = elem_3.innerHTML;
        elem_3.innerHTML = '';
        input.addEventListener('blur', function () {
            elem_3.innerHTML = this.value;
            elem_3.addEventListener('click', func); // повесим событие обратно
        });
        elem_3.appendChild(input);
        elem_3.removeEventListener('click', func); // отвяжем событие
    });

    let elems_4 = document.querySelectorAll('#parent_4 li');
    for (let li of elems_4) {
        li.addEventListener('click', function func() {
            let input = document.createElement('input');
            input.value = li.innerHTML;
            input.addEventListener('blur', function func_2() {
                li.innerHTML = this.value;
                li.addEventListener('click', func);
            });

            li.innerHTML = '';
            li.appendChild(input);
            li.removeEventListener('click', func);
        });
    }

    let tds_5 = document.querySelectorAll('#table_5 td');
    for (let td of tds_5) {
        td.addEventListener('click', function func() {
            let input = document.createElement('input');
            input.value = td.innerHTML;
            input.addEventListener('blur', function func_2() {
                td.innerHTML = this.value;
                td.addEventListener('click', func);
            });

            td.innerHTML = '';
            td.appendChild(input);
            td.removeEventListener('click', func);
        });
    }

    let ps = document.querySelectorAll('#parent_6 span');
    for (let p of ps) {
        let a = document.createElement('a');
        a.innerHTML = 'remove';
        a.href = '#';
        p.parentElement.appendChild(a);
        a.addEventListener('click', function func(event) {
            p.innerHTML = '';
            a.remove();
            event.preventDefault();
        });

        p.addEventListener('click', function func_2() {
            let input = document.createElement('input');
            input.value = p.innerHTML;
            input.addEventListener('blur', function func_3() {
                p.innerHTML = this.value;
                p.addEventListener('click', func_2);
                this.remove();
            });

            p.innerHTML = '';
            p.parentElement.appendChild(input);
            p.removeEventListener('click', func_2);
        });
    }

    let ps_7 = document.querySelectorAll('#parent_7 p');
    for (let p of ps_7) {
        p.innerHTML = '<span>' + p.innerHTML + '</span>';
    }

    ps = document.querySelectorAll('#parent_7 span');
    for (let p of ps) {
        let a = document.createElement('a');
        a.innerHTML = 'remove';
        a.href = '#';
        p.parentElement.appendChild(a);
        a.addEventListener('click', function func(event) {
            p.innerHTML = '';
            a.remove();
            event.preventDefault();
        });

        p.addEventListener('click', function func_2() {
            let input = document.createElement('input');
            input.value = p.innerHTML;
            input.addEventListener('blur', function func_3() {
                p.innerHTML = this.value;
                p.addEventListener('click', func_2);
                this.remove();
            });

            p.innerHTML = '';
            p.parentElement.appendChild(input);
            p.removeEventListener('click', func_2);
        });
    }


    ps = document.querySelectorAll('#parent_8 p');
    for (let p of ps) {
        p.innerHTML = '<span>' + p.innerHTML + '</span>';
        let a = document.createElement('a');
        a.innerHTML = 'through';
        a.href = '#';
        p.appendChild(a);
        a.addEventListener('click', function func(event) {
            p.querySelector('span').classList.toggle('text_line-through');
            event.preventDefault();
        });
    }

    ps = document.querySelectorAll('#parent_9 p');
    for (let p of ps) {
        p.innerHTML = '<span>' + p.innerHTML + '</span>';
        let a = document.createElement('a');
        a.innerHTML = 'through';
        a.href = '#';
        p.appendChild(a);
        a.addEventListener('click', function func(event) {
            p.querySelector('span').classList.toggle('text_line-through');
            a.remove();
            event.preventDefault();
        });
    }

    let trs = document.querySelectorAll('#table_10 tr');
    for (let tr of trs) {
        let td = document.createElement('td');
        let a = document.createElement('a');
        a.href = '#';
        a.innerHTML = 'paint';
        td.appendChild(a);
        tr.appendChild(td);

        a.addEventListener('click', function (event) {
            tr.classList.add('green');
            event.preventDefault();
        })
    }

    trs = document.querySelectorAll('#table_11 tr');
    for (let tr of trs) {
        let td = document.createElement('td');
        let a = document.createElement('a');
        a.href = '#';
        a.innerHTML = 'paint';
        td.appendChild(a);
        tr.appendChild(td);

        a.addEventListener('click', function (event) {
            tr.classList.toggle('green');
            event.preventDefault();
        })
    }
</script>
</body>
</html>