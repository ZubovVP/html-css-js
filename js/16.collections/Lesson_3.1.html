<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lesson_3.1</title>
</head>
<style>
    .description {
        width: 600px;
    }

    .view {
        width: 300px;
    }

    div {
        width: 200px;
    }

    table, th, td {
        padding: 10px;
        border: 1px solid;
        border-collapse: collapse;
    }
</style>
<body>
<h1>Итераторы и генераторы</h1>
<h2>Цикл for-of и введение в понятие итератора</h2>
<table border="1">
    <tr>
        <td class="description">
            <p>Дан массив. Переберите его элементы через for-of, выведите их на экран.</p>
        </td>
        <td colspan="2" class="view">
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Даны абзацы. Получите их через querySelectorAll, переберите через цикл for-of, добавьте каждому абзацу
                в конец текста восклицательный знак.</p>
        </td>
        <td colspan="2" class="view">
            <p class="p_1">text_1</p>
            <p class="p_1">text_2</p>
            <p class="p_1">text_3</p>
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Дан массив. Обратитесь к его элементу с ключом Symbol.iterator и выведите результат в консоль.</p>
        </td>
        <td colspan="2" class="view">
        </td>
    </tr>
</table>
<h2>Введение в функции-генераторы ES6</h2>
<table border="1">
    <tr>
        <td class="description">
            <p>Сделайте функцию-генератор, которая будет возвращать итератор. Первый вызов метода next итератора должен
                вернуть 1, второй вызов - 2, третий вызов - 3.</p>
        </td>
        <td colspan="2" class="view">
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Переберите итератор, полученный в предыдущей задаче через цикл for-of.</p>
        </td>
        <td colspan="2" class="view">
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Дан массив. С помощью функции-генератора создайте итератор, перебирающий элементы массива по одному.</p>
        </td>
        <td colspan="2" class="view">
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Дан массив. С помощью функции-генератора создайте итератор, перебирающий элементы массива с конца.</p>
        </td>
        <td colspan="2" class="view">
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Дан массив. С помощью функции-генератора создайте итератор, каждый вызов которого будет возвращать по
                два элемента массива (сначала первые два, потом вторые два и так далее). Элементы должны возвращаться
                в виде массива из двух элементов.</p>
        </td>
        <td colspan="2" class="view">
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Дан массив с числами. С помощью функции-генератора создайте итератор, каждый вызов которого будет
                возвращать следующий элемент массива, являющийся четным числом.
            </p>
        </td>
        <td colspan="2" class="view">
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Дан массив с числами. С помощью функции-генератора создайте итератор, каждый вызов которого будет
                возвращать следующее число Фибоначчи.
            </p>
        </td>
        <td colspan="2" class="view">
        </td>
    </tr>
</table>
<h2>Создаем итератор объекта с помощью генератора ES6</h2>
<table border="1">
    <tr>
        <td class="description">
            <p>Дан объект. С помощью функции-генератора создайте его итератор, переберите элементы этого объекта
                с помощью цикла for-of.</p>
        </td>
        <td colspan="2" class="view">
        </td>
    </tr>
</table>
<h2>Создание итерируемых объектов на ES6</h2>
<table border="1">
    <tr>
        <td class="description">
            <p>Дан объект. Сделайте так, чтобы его элементы можно было перебрать с помощью цикла for-of.</p>
        </td>
        <td colspan="2" class="view">
        </td>
    </tr>
</table>
<h2>Встроенные итераторы коллекций values, keys и entries</h2>
<table border="1">
    <tr>
        <td class="description">
            <p>Дан массив. Переберите элементы этого массива через цикл for-of так, чтобы в каждой итерации в переменную
                elem записывался элемент массива, а в переменную key - ключ.</p>
        </td>
        <td colspan="2" class="view">
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Дан массив. Получите массив ключей этого массива. Найдите сумму элементов этого нового полученного
                массива.</p>
        </td>
        <td colspan="2" class="view">
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Дана коллекция Map. Получите массив ее ключей.</p>
        </td>
        <td colspan="2" class="view">
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Дана коллекция Map. Получите массив ее значений.</p>
        </td>
        <td colspan="2" class="view">
        </td>
    </tr>
</table>
<h2>Встроенные итераторы строк</h2>
<table border="1">
    <tr>
        <td class="description">
            <p>Дана строка. Переберите ее посимвольно циклом for-of и выведите каждый символ в отдельном теге li тега
                ul.</p>
        </td>
        <td colspan="2" class="view">
            <ul id="ul_1"></ul>
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Дано число. С помощью цикла for-of получите сумму его цифр.</p>
        </td>
        <td colspan="2" class="view" id="task_18">
        </td>
    </tr>
</table>
<h2>Оператор spread и итераторы</h2>
<table border="1">
    <tr>
        <td class="description">
            <p>Сделайте функцию, которая параметром будет принимать строку, а возвращать массив ее символов.</p>
        </td>
        <td colspan="2" class="view">
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Дан объект. Сделайте так, чтобы к нему можно было применить оператор spread и при этом
                возвращались значения объекта.</p>
        </td>
        <td colspan="2" class="view" id="task_20">
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Дан объект. Сделайте так, чтобы к нему можно было применить оператор spread и при этом возвращались
                ключи объекта.</p>
        </td>
        <td colspan="2" class="view" id="task_21">
        </td>
    </tr>
</table>
<h2>Оператор spread и строки</h2>
<table border="1">
    <tr>
        <td class="description">
            <p>Сделайте функцию, которая параметром будет принимать строку, а возвращать массив ее символов.</p>
        </td>
        <td colspan="2" class="view" id="task_22">
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Сделайте функцию, которая параметром будет принимать строку и выполнять переворот этой строки так,
                чтобы символы шли в обратном порядке.</p>
        </td>
        <td colspan="2" class="view" id="task_23">
        </td>
    </tr>
    <tr>
        <td class="description">
            <p>Дано число. Найдите сумму цифр этого числа.</p>
        </td>
        <td colspan="2" class="view" id="task_24">
        </td>
    </tr>
</table>
<h2>Применение</h2>
<table border="1">
    <tr>
        <td class="description">
            <p>Даны абзацы и кнопка. Сделайте так, чтобы по нажатию на кнопку в конец каждого абзаца добавился его
                порядковый номер.</p>
        </td>
        <td colspan="2" class="view" id="task_25">
            <p>абзац_1</p>
            <p>абзац_2</p>
            <p>абзац_3</p>
            <button>добавить порядковый номер</button>
        </td>
    </tr>
</table>
<script>
    "use strict";
    let arr = [1, 2, 3, 4, 5];
    for (let el of arr) {
        console.log(el);
    }

    let ps = document.querySelectorAll('p.p_1');
    for (let p of ps) {
        p.textContent += '!';
    }

    console.log(arr[Symbol.iterator]);

    function* createGenerator() {
        yield 1;
        yield 2;
        yield 3;
    }

    for (let el of createGenerator()) {
        console.log(el);
    }

    function* createGeneratorArray(arr) {
        for (let el of arr) {
            yield el;
        }
    }

    for (let el of createGeneratorArray([1, 2, 3, 4, 5])) {
        console.log(el);
    }

    function* createGeneratorArrayReverse(arr) {
        for (let step = arr.length - 1; step >= 0; step--) {
            yield arr[step];
        }
    }

    for (let el of createGeneratorArrayReverse([1, 2, 3])) {
        console.log(el);
    }

    function* createGeneratorArrayDouble(arr) {
        for (let step = 0; step <= arr.length - 2; step++) {
            yield [arr[step], arr[++step]];
        }
    }

    for (let el of createGeneratorArrayDouble([1, 2, 3, 4])) {
        console.log(el);
    }

    function* createGeneratorEven(arr) {
        for (let el of arr) {
            if (el % 2 == 0) {
                yield el;
            }
        }
    }

    for (let el of createGeneratorEven([1, 2, 3, 4])) {
        console.log(el);
    }

    function* createGeneratorFibonacci(arr) {
        for (let step = 1; step < arr.length; step++) {
            yield Number(arr[step - 1]) + Number(arr[step]);
        }
    }

    for (let el of createGeneratorFibonacci([1, 2, 3, 4])) {
        console.log(el);
    }

    let obj = {1: 'a', 2: 'b', 3: 'c'};

    function* createIteratorObj(obj) {
        for (let key in obj) {
            yield obj[key];
        }
    }

    for (let el of createIteratorObj(obj)) {
        console.log(el);
    }

    obj[Symbol.iterator] = function* () {
        for (let key in this) {
            yield this[key];
        }
    }
    for (let el of obj[Symbol.iterator]()) {
        console.log(el);
    }

    arr = [1, 2, 3];
    for (let [key, value] of arr.entries()) {
        console.log('key - ' + key + ': value - ' + value);
    }

    let keys = [];
    let sum = 0;
    for (let key of arr.keys()) {
        keys.push(key);
    }
    keys.forEach(key => sum += Number(key));
    console.log('sum of keys = ' + sum);

    let map = new Map();
    map.set('a', 1);
    map.set('b', 2);
    map.set('c', 3);
    keys = [];
    for (let key of map.keys()) {
        keys.push(key);
    }
    console.log(keys);

    let values = [];
    for (let value of map.values()) {
        values.push(value);
    }
    console.log(values);

    let ul = document.querySelector('#ul_1');
    let line = 'text';
    for (let symbol of line) {
        let li = document.createElement('li');
        li.textContent = symbol;
        ul.appendChild(li);
    }

    let number = 12345;
    sum = 0;
    for (let elem of String(number)) {
        sum += +elem;
    }
    let p = document.createElement('p');
    p.textContent = 'сумма цифр = ' + sum;
    document.querySelector('#task_18').appendChild(p);

    let colElem = new Set();
    let li = document.createElement('li');
    li.textContent = 'text1';
    colElem.add(li);
    p = document.createElement('p');
    p.textContent = 'text2';
    colElem.add(p);
    let p2 = document.createElement('p');
    p2.textContent = 'text3';
    colElem.add(p2);

    arr = [...colElem];
    console.log(arr);

    obj = {
        1: 'a',
        2: 'b',
        3: 'c',
        [Symbol.iterator]: function* () {
            for (let key in this) {
                yield this[key];
            }
        }
    };
    p = document.createElement('p');
    arr = [...obj];
    p.innerHTML = arr;
    document.querySelector('#task_20').appendChild(p);

    obj = {
        1: 'a',
        2: 'b',
        3: 'c',
        [Symbol.iterator]: function* () {
            for (let key in this) {
                yield key;
            }
        }
    };
    p = document.createElement('p');
    arr = [...obj];
    p.innerHTML = arr;
    document.querySelector('#task_21').appendChild(p);

    function lineToArray(line) {
        return [...line];
    }

    p = document.createElement('p');
    p.innerHTML = lineToArray('text!');
    document.querySelector('#task_22').appendChild(p);

    function lineToReverseArray(line) {
        return [...line].reverse();
    }

    p = document.createElement('p');
    p.innerHTML = lineToReverseArray('text!');
    document.querySelector('#task_23').appendChild(p);


    number = 123;
    sum = 0;
    p = document.createElement('p');
    [...String(number)].forEach(el => sum += +el);
    p.innerHTML = sum
    document.querySelector('#task_24').appendChild(p);

    let td = document.querySelector('#task_25');
    let button = td.querySelector('button');
    ps = td.querySelectorAll('p');
    button.addEventListener('click', () => {
        for (let [key, {innerHTML}] of ps.entries()) {
            ps[key].innerHTML = innerHTML + ' key - ' + key;
        }
    });
</script>
</body>
</html>